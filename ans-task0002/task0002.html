<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>task0002</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link rel="stylesheet" type="text/css" href="css/task0002.css">
</head>
<body>
    <h3 class="info">实现的函数及其功能如下，部分测试结果见控制台</h3>
    <h1>2.JavaScript数据类型及语言基础</h1>
    <div class="blocks">
        <p>isArray() --- 判断是否为数组</p>
        <p>isFunction() --- 判断是否为函数</p>
        <p>cloneObject() --- 深度克隆（对目标对象的完整拷贝，递归实现）</p>
        <p>uniqArray() --- 数组元素去重</p>
        <p>simpleTrim() --- 去除字符串头尾空白（循环实现）</p>
        <p>trim() --- 去除字符串头尾空白（正则表达式实现）</p>
        <p>each() --- 对数组中每一个元素执行指定函数</p>
        <p>getObjectLength() --- 获取对象第一层元素的数量</p>
        <p>isEmail() --- 判断是否为邮箱地址</p>
        <p>isMobilePhone() --- 判断是否为手机号</p>
    </div>
    <h1>3.DOM</h1>
    <div class="blocks">
        <p id="addClass">addClass() --- 为元素添加新样式</p>
        <input id="addClassBtn" type="button" value="addClass">
        <p id="rmClass" class="colorBlue">removeClass() --- 删除元素的样式</p>
        <input id="rmClassBtn" type="button" value="removeClass">
        <p>isSiblingNode() --- 判断是否为同一个父元素下的同一级元素</p>
        <p id="getPos">getPosition() --- 获取元素相对浏览器窗口的位置</p>
        <p >$() --- 简单的query，返回满足条件的第一个元素</p>
    </div>
    <h1>4.事件</h1>
    <div class="blocks">
        <p id="addEvent">addEvent() --- 为元素绑定事件及其响应</p>
        <p>removeEvent() --- 删除元素绑定的事件及其响应</p>
        <p id="addClickEvent">addClickEvent() --- 为元素绑定click事件</p>
        <p id="addEnterEvent">addEnterEvent() --- 为元素绑定按Enter键事件</p>
        <p id="$on">$.on() --- 同addEvent()</p>
        <p>$.un() --- 同removeEvent()</p>
        <p id="$click">$.click() --- 同addClickEvent()</p>
        <p id="$enter">$.enter() --- 同addEnterEvent()</p>
        <p>$.delegate() --- 事件代理</p>
        <ul id="list">
            <li>Simon</li>
            <li>Kenner</li>
            <li>Erik</li>
        </ul>
    </div>
    <h1>5.BOM</h1>
    <div class="blocks">
        <p>isIE() --- 判断是否为IE浏览器</p>
        <p>setCookie() --- 设置cookie</p>
        <p>getCookie() --- 获取cookie值</p>
    </div>
    <h1>小练习</h1>
    <div class="blocks">link</div>

    <script type="text/javascript" src="js/util.js"></script>
    <script type="text/javascript">
    /**
     * js基础
     */
    console.log("--- TEST isArray() ---");
    var arr1 = [1,2,3,4,5];
    var arr2 = "12345";
    console.log(arr1 + " : " + isArray(arr1));     // arr1 is Array: true
    console.log(arr2 + " : " + isArray(arr2));     // arr2 is Array: false

    console.log("\n--- TEST isFunction() ---");
    var fun1 = function() {
        arr1[5] = 1;
    };
    var fun2 = null;
    console.log(fun1 + " : " + isFunction(fun1));   // fun1 is function: true
    console.log(fun2 + " : " + isFunction(fun2));   // fun2 is function: false

    console.log("\n--- TEST cloneObject() ---");
    var srcObj = {
        a: 1,
        b: {
            b1: ["hello", "hi"],
            b2: "JavaScript"
        }
    };
    console.log("测试用例：");
    console.log("srcObj.a = " + srcObj.a);
    console.log("srcObj.b.b1[0] = " + srcObj.b.b1[0]);
    var abObj = srcObj;     // 浅拷贝
    var tarObj = cloneObject(srcObj);   // 深拷贝
    srcObj.a = 2;
    srcObj.b.b1[0] = "Hello";
    console.log("修改后，浅拷贝：");
    console.log("abObj.a = " + abObj.a);   // 2
    console.log("abObj.b.b1[0] = " + abObj.b.b1[0]);     // 'Hello'
    console.log("修改后，深拷贝：");
    console.log("tarObj.a = " + tarObj.a);  // 1
    console.log("tarObj.b.b1[0] = " + tarObj.b.b1[0]);    // 'hello'

    console.log("\n--- TEST uniqArray() ---");
    var a = [1, 3, 5, 7, 5, 3];
    console.log("测试用例：");
    console.log(a);
    var b = uniqArray(a);
    console.log("去重后：");
    console.log(b);     // 1,3,5,7

    console.log("\n--- TEST simpleTrim() & trim() ---");
    var str = '   hi!  ';
    console.log("测试用例：");
    console.log(str);
    str1 = simpleTrim(str);
    console.log("去除头尾空白后（simpleTrim）：");
    console.log(str1); // 'hi!'
    str2 = simpleTrim(str);
    console.log("去除头尾空白后（trim）：");
    console.log(str2); // 'hi!'

    console.log("\n--- TEST each() ---");
    var arr = ['java', 'c', 'php', 'html'];
    console.log("测试用例：");
    console.log(arr);
    function output1(item) {
        console.log(item);
    }
    console.log("测试结果1：");
    each(arr, output1);  // java, c, php, html
    function output2(item, index) {
        console.log(index + ': ' + item);
    }
    console.log("测试结果2：");
    each(arr, output2);  // 0:java, 1:c, 2:php, 3:html

    console.log("\n--- TEST getObjectLength() ---");
    var obj = {
        a: 1,
        b: 2,
        c: {
            c1: 3,
            c2: 4
        }
    };
    console.log("测试用例：");
    console.log(obj);
    console.log("该对象第一层元素的数量：");
    console.log(getObjectLength(obj));  // 3

    var email = "1234567@qq.com";
    var phone = "12345677777";
    console.log("\n--- TEST isEmail() ---");
    console.log(email + " : " + isEmail(email));
    console.log(phone + " : " + isEmail(phone));

    console.log("\n--- TEST isMobilePhone() ---");
    console.log(email + " : " + isMobilePhone(email));
    console.log(phone + " : " + isMobilePhone(phone));
    </script>

    <script type="text/javascript">
    /**
     * DOM
     */
    var btnAdd = document.getElementById("addClassBtn");
    var elementAdd = document.getElementById("addClass");
    btnAdd.addEventListener("click", function() {
        addClass(elementAdd, "colorRed");
    });

    var btnRm = document.getElementById("rmClassBtn");
    var elementRm = document.getElementById("rmClass");
    btnRm.addEventListener("click", function() {
        removeClass(elementRm, "colorBlue");
    });

    console.log("\n--- TEST isSiblingNode() ---");
    console.log("node 1: #" + elementAdd.id);
    console.log("node 2: #" + elementRm.id);
    console.log(isSiblingNode(elementAdd, elementRm));

    console.log("\n--- TEST getPosition() ---");
    var elementGetPos = document.getElementById("getPos");
    var posGetPos = getPosition(elementGetPos);
    console.log("#" + elementGetPos.id + " {x, y} = {" + posGetPos.x + ", " + posGetPos.y + "}");

    console.log("\n--- TEST $() ---");
    console.log("#addClass :");
    console.log($("#addClass"));
    console.log("h1 :");
    console.log($("h1"));
    console.log(".colorBlue :");
    console.log($(".colorBlue"));
    console.log("[type] :");
    console.log($("[type]"));
    console.log("[value=removeClass] :");
    console.log($("[value=removeClass]"));
    console.log(".blocks p");
    console.log($(".blocks p"));
    </script>

    <script type="text/javascript">
    /**
     * 4.事件
     */
    function funBold() {
        this.style.fontWeight = "bold";
    }
    function enter() {
        $("#addEnterEvent").style.fontWeight = "bold";
    }
    addEvent($("#addEvent"), "mouseover", funBold);
    // removeEvent($("#addEvent"), "mouseover", funBold);
    addClickEvent($("#addClickEvent"), funBold);
    addEnterEvent(document, enter);

    function $enter() {
        $("#$enter").style.fontWeight = "bold";
    }
    $.on($("#$on"), "mouseover", funBold);
    // $.un($("#$on"), "mouseover", funBold);
    $.click($("#$click"), funBold);
    $.enter(document, $enter);
    
    function log() {
        console.log("\n--- TEST $.delegate() ---");
        console.log("delegation");
    }
    $.delegate($("#list"), "li", "click", log);

    // $.on("#$on", "mouseover", funBold);
    // // $.un("#$on", "mouseover", funBold);
    // $.click("#$click", funBold);
    // $.delegate("#list", "li", "click", log);
    </script>

    <script type="text/javascript">
    /**
     * 5.BOM
     */
    console.log("\n--- TEST isIE() ---");
    console.log(isIE());

    console.log("\n--- TEST setCookie() ---");
    setCookie("name", "pg");
    // setCookie("age", "100", new Date("Jul 24 2016 13:50:00 GMT+0800"));
    console.log("document.cookie = '" + document.cookie + "'");
    
    console.log("\n--- TEST getCookie() ---");
    console.log("name = " + getCookie("name"));
    console.log("age = " + getCookie("age"));
    </script>
</body>
</html>
